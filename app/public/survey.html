<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<!--<link rel="stylesheet" href="survey.css">-->
<style>
.container {
    width:80%;
    height:800%;
    margin : 10px 10px 10px 10px;
    padding: 20px 20px 20px 20px;
    background-color: rgb(226,226,226); 
}
#submit {
    margin-top: 15px;
    margin-bottom:10px;
}
/* The Modal (background) */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content/Box */
.modal-content {
    background-color: #fefefe;
    padding: 20px;
    border: 1px solid #888;
    width: 60%; /* Could be more or less, depending on screen size */
}

/* The Close Button */
.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}
#caption, #caption2 {
    font-family: "Times New Roman", Times, serif;
    font-size : 30px;
    font-style: italic;
}
</style>
</head>
<body>
    <div class="container">
        <h1> Survey Questions</h1>
        <h3> About You </h3>
        <h4> Name (Required) </h4>
        <input type="text" name="" id="name" class="form-control" required="">
        <h4> Link to Photo Image </h4>
        <input type="text" name="" id="photo" class="form-control" required="">
        <!--<input type="file"  id="photo" onchange="previewFile()"><br>
         <img src="" height="200" alt="Image preview...">-->

        <h3><strong>Question 1</strong></h3>
        <h4>You like music</h4>
        <select data-placeholder="" class="chosen-select" id="q1">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>

            <h3><strong>Question 2</strong></h3>
        <h4>You like dancing</h4>
        <select data-placeholder="" class="chosen-select" id="q2">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>

            <h3><strong>Question 3</strong></h3>
        <h4>You like to read books</h4>
        <select data-placeholder="" class="chosen-select" id="q3">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

            <h3><strong>Question 4</strong></h3>
        <h4>You like solving crossword puzzles</h4>
        <select data-placeholder="" class="chosen-select" id="q4">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3><strong>Question 5</strong></h3>
        <h4>You like going on long treks</h4>
        <select data-placeholder="" class="chosen-select" id="q5">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

         <h3><strong>Question 6</strong></h3>
        <h4>You like zumba</h4>
        <select data-placeholder="" class="chosen-select" id="q6">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>


 <h3><strong>Question 7</strong></h3>
        <h4>You like yoga and meditation</h4>
        <select data-placeholder="" class="chosen-select" id="q7">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

<h3><strong>Question 8</strong></h3>
        <h4>You prefer large social gatherings compared to intimate gatherings</h4>
        <select data-placeholder="" class="chosen-select" id="q8">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3><strong>Question 9</strong></h3>
        <h4>You like to go to the gym 3-5 times a week</h4>
        <select data-placeholder="" class="chosen-select" id="q9">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

<h3><strong>Question 10</strong></h3>
        <h4>You like trouble shooting buggy code</h4>
        <select data-placeholder="" class="chosen-select" id="q10">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
        Submit</button>

    </div>

   <div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <div id="caption"></div>
    <img class="modal-content" id="img01">
    <div id="caption2">was your best pick...</div>
  </div>

</div>
</body>
</html>
<script>
    $("#submit").on("click", function() {
        var newPerson = {
            name : $("#name").val().trim(),
            pic : $("#photo").val().trim(),
            preferences : []
        }
         newPerson.preferences[0] = $("#q1").val();
         newPerson.preferences[1] = $("#q2").val();
         newPerson.preferences[2] = $("#q3").val();
         newPerson.preferences[3] = $("#q4").val();
         newPerson.preferences[4] = $("#q5").val();
         newPerson.preferences[5] = $("#q6").val();
         newPerson.preferences[6] = $("#q7").val();
         newPerson.preferences[7] = $("#q8").val();
         newPerson.preferences[8] = $("#q9").val();
         newPerson.preferences[9] = $("#q10").val();
         
            
        console.log(newPerson);
        var currURL = window.location.origin;
        $.post(currURL + "/api/choices", newPerson, function(data){
        if (data) {
            alert("Yay! Your choices have been added!");
            console.log("Best match = " + data);
            displayModal(data.name, data.pic);
             $("#name").val("");
            $("#photo").val("");
            $("#q1").val("");
            $("#q2").val("");
            $("#q3").val("");
            $("#q4").val("");
            $("#q5").val("");
            $("#q6").val("");
            $("#q7").val("");
            $("#q8").val("");
            $("#q9").val("");
            $("#q10").val("");
          }else{
            alert("Sorry you were not added, check all the preferences were selected");
          }
           
        });

    });

function displayModal(name, pic){
    // Get the modal
var modal = document.getElementById('myModal');

// Get the button that opens the modal
// var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];
var captionText = document.getElementById("caption");
var modalImg = document.getElementById("img01");
// When the user clicks on the button, open the modal 
    modal.style.display = "block";
    modalImg.src = pic;
    captionText.innerHTML = name;


// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
}

</script>